<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Tagging files and folders using hashtags and symlinks</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="Lars Solberg">

    <!-- Le styles -->
    <link rel="stylesheet" href="../.././theme/css/bootstrap.min.css" type="text/css" />
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .container-fluid {
        max-width: 1500px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      .tag-1 {
        font-size: 14pt;
      }
      .tag-2 {
        font-size: 12pt;
      }
      .tag-2 {
        font-size: 10pt;
      }
      .tag-4 {
        font-size: 8pt;
      }

      .article {
        border-right-width: 4px;
        border-right-style: solid;
      }
      .article-odd {
        border-left-color: #CCC;
        border-right-color: #CCC;
        border-top-color: #CCC;
      }
      .article-even {
        border-left-color: #444;
        border-right-color: #444;
        border-top-color: #444;
      }

      .article > h1 {
          font-size: 2.4em;
          border-left-width: 4px;
          border-left-style: solid;
          border-top-width: 4px;
          border-top-style: solid;
          margin-bottom: 8px;
          padding-left: 4px;
      }

      .content > h1 { font-size: 1.5em; }
      .content > h2 { font-size: 1.3em; }
      .content > h3 { font-size: 1.1em; }
      .content > h4 { font-size: 0.9em; }
      .content > h5 { font-size: 0.7em; }


    </style>
    <link href="../.././theme/css/bootstrap-responsive.min.css" rel="stylesheet">
        <link href="../.././theme/css/font-awesome.css" rel="stylesheet">

    
    <link href="../.././theme/css/pygments-emacs.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="../.././theme/images/favicon.ico">
    <link rel="apple-touch-icon" href="../.././theme/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../.././theme/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../.././theme/images/apple-touch-icon-114x114.png">

    <link href="../.././feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="/blog/" />
    
      <link href="../.././feeds/category-geeky.atom.xml" type="application/atom+xml" rel="alternate" title="/blog/category/geeky" />
    
    
  </head>

  <body>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../.././index.html">Boa Blog </a>
          <div class="nav-collapse">
            <ul class="nav">
              
              
              
                          <li class="divider-vertical"></li>
              
              
                  <li class="active">
                    <a href="../.././category/geeky.html">
						<i class="icon-folder-open icon-large"></i>geeky
					</a>
                  </li>
              
                  <li >
                    <a href="../.././category/misc.html">
						<i class="icon-folder-open icon-large"></i>misc
					</a>
                  </li>
              
                          <ul class="nav pull-right">
                                <li><a href="../.././archives.html"><i class="icon-th-list"></i>Archives</a></li>
                          </ul>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span9" id="content">
            
<section id="content">
        <article>
                <header>
                        <h1>
                                <a href=""
                                        rel="bookmark"
                                        title="Permalink to Tagging files and folders using hashtags and symlinks">
                                        Tagging files and folders using hashtags and symlinks
                                </a>
                                
                        </h1>
                </header>
                <div class="entry-content">
                <div class="well">
                        <footer class="post-info">
<span class="label">Date</span>
<abbr class="published" title="2012-11-18T00:00:00">
        <i class="icon-calendar">&nbsp;</i>Sun 18 November 2012
</abbr>

<!--

<span class="label">By</span>
<a href="../.././author/lars-solberg.html"><i class="icon-user"></i>Lars Solberg</a>

-->



<div class="pull-right">
  <span class="label">Category</span>
  <a href="../.././category/geeky.html"><i class="icon-folder-open"></i>geeky</a>.


  &nbsp;&nbsp;&nbsp;
  <span class="label">Tags</span>
  
    <a href="../.././tag/linux.html"><i class="icon-tag">&nbsp;</i>linux</a>&nbsp;&nbsp;
  
    <a href="../.././tag/python.html"><i class="icon-tag">&nbsp;</i>python</a>&nbsp;&nbsp;
  




  &nbsp;&nbsp;&nbsp;
  <span class="label">Github</span>
    <a href="https://github.com/xeor/taggo"><i class="icon-github-sign">/</i>xeor/taggo</a>&nbsp;&nbsp;


</div>


</footer><!-- /.post-info -->
                </div>
                <p>There is lots of tools out there that let you organise files (specially your picture archive). However, they are all depending on some sort of database, one master computer to add the tags from, and you can't browse the organised files in their organised structure from all devices.</p>
<p>I made this project because I had this exact problem organising my own pictures. I wanted something which:</p>
<ul>
<li>You could tag pictures as close to where you look at them (IE, the file browser itself)</li>
<li>Is platform independent.<ul>
<li>Like real platform independent! I wanted to browse this tags on my TV!</li>
</ul>
</li>
<li>Not another thing to backup. I am already backing up the pictures themselves.</li>
<li>Support organising whole folders, not just single files.</li>
</ul>
<p>There is probably many more than myself that is annoyed by this problem, therefor I will share my solution, which is a python script that goes trough all the files in a directory, looks at the filenames and looks for hashtags. This is put into my storage NAS's crontab and runs every hour.</p>
<h2>Example</h2>
<h3>File structure</h3>
<div class="codehilite"><pre><span class="n">xeor</span><span class="p">@</span><span class="n">omi</span> <span class="p">{</span> <span class="o">~/</span><span class="n">Documents</span><span class="o">/</span><span class="n">my_pictures</span> <span class="p">}</span>$ <span class="nb">find</span> <span class="p">.</span>
<span class="p">.</span>
<span class="o">./</span>2012 #<span class="n">Business</span> <span class="n">trip</span> <span class="n">to</span> #<span class="n">USA</span>
<span class="o">./</span>2012 #<span class="n">Business</span> <span class="n">trip</span> <span class="n">to</span> #<span class="n">USA</span><span class="o">/</span><span class="n">dcim0123</span> #<span class="n">People</span><span class="o">-</span><span class="n">Lars</span><span class="p">.</span><span class="n">jpg</span>
<span class="o">./</span>2012 #<span class="n">Business</span> <span class="n">trip</span> <span class="n">to</span> #<span class="n">USA</span><span class="o">/</span><span class="n">dcim0124</span><span class="p">.</span><span class="n">jpg</span>
<span class="o">./</span>2012 #<span class="n">Business</span> <span class="n">trip</span> <span class="n">to</span> #<span class="n">USA</span><span class="o">/</span><span class="n">dcim0125</span><span class="p">.</span><span class="n">jpg</span>
<span class="o">./</span>2012 #<span class="n">Business</span> <span class="n">trip</span> <span class="n">to</span> #<span class="n">USA</span><span class="o">/</span><span class="n">dcim0126</span> #<span class="n">Conference</span><span class="p">.</span><span class="n">jpg</span>
</pre></div>


<h3>Running taggo</h3>
<div class="codehilite"><pre><span class="n">taggo</span> <span class="n">run_once</span>
</pre></div>


<h3>Tags created</h3>
<div class="codehilite"><pre><span class="n">xeor</span><span class="p">@</span><span class="n">omi</span> <span class="p">{</span> <span class="o">~/</span><span class="n">Documents</span><span class="o">/</span><span class="n">tags</span> <span class="p">}</span>$ <span class="nb">find</span> <span class="p">.</span> 
<span class="p">.</span>
<span class="o">./</span><span class="n">Business</span>
<span class="o">./</span><span class="n">Business</span><span class="o">/</span><span class="n">root</span> <span class="o">-</span> 2012 #<span class="n">Business</span> <span class="n">trip</span> <span class="n">to</span> #<span class="n">USA</span>
<span class="o">./</span><span class="n">Conference</span>
<span class="o">./</span><span class="n">Conference</span><span class="o">/</span>2012 #<span class="n">Business</span> <span class="n">trip</span> <span class="n">to</span> #<span class="n">USA</span> <span class="o">-</span> <span class="n">dcim0126</span> #<span class="n">Conference</span><span class="p">.</span><span class="n">jpg</span>
<span class="o">./</span><span class="n">People</span>
<span class="o">./</span><span class="n">People</span><span class="o">/</span><span class="n">Lars</span>
<span class="o">./</span><span class="n">People</span><span class="o">/</span><span class="n">Lars</span><span class="o">/</span>2012 #<span class="n">Business</span> <span class="n">trip</span> <span class="n">to</span> #<span class="n">USA</span> <span class="o">-</span> <span class="n">dcim0123</span> #<span class="n">People</span><span class="o">-</span><span class="n">Lars</span><span class="p">.</span><span class="n">jpg</span>
<span class="o">./</span><span class="n">USA</span>
<span class="o">./</span><span class="n">USA</span><span class="o">/</span><span class="n">root</span> <span class="o">-</span> 2012 #<span class="n">Business</span> <span class="n">trip</span> <span class="n">to</span> #<span class="n">USA</span>
</pre></div>


<h3>Explaination</h3>
<p>As you can see on the file structure, we created one folder and 4 files. The folder itself <em>2012 #Business trip to #USA</em> have two tags, <em>#Business</em> and <em>#USA</em> (as you probably already knew :) )
The dcim0123 file have a tag like <em>#People-Lars</em>, which means that taggo should threat it as a sub tag.</p>
<p>The list of tags created is now just a bunch of symlinks to the original files. <em>./USA/root - 2012 #Business trip to #USA</em> is a link to the folder called <em>2012 #Business trip to #USA</em>, the same with <em>./Business/root - 2012 #Business trip to #USA</em>. For our sub tag, you can see that it is in the directory People/Lars; <em>./People/Lars/2012 #Business trip to #USA - dcim0123 #People-Lars.jpg</em>.</p>
<h3>Configuration</h3>
<p>In the file called taggo.cfg you can define stuff like tag indicator (the hashtag), sub tag separator, what filename the symlinked filenames should get (default is <em>%(rel_folders)s - %(basename)s</em>), what to replace / with in tag filenames, content folder and tag folder.</p>
<p>Taggo will automatically create the taggo.cfg file when you run it the first time. (Just do a <em>./taggo</em>)</p>
<h2>Usage</h2>
<p>Using taggo is simple, just put it in any directory and put something like <em>22 * </em> * <em> /usr/bin/python /path/to/taggo run_once</em> in the crontab. It will make sure that new symlinks is created.</p>
<p>If you rename a file, the symlink will die. But when you use the run_once parameter, it will automatically delete the invalid symlinks. I have been very careful when creating the delete function. It will only delete symlinks where the paths they point to does not exists. and to delete the empty directories, we are using os.rmdir, which is a python function that is made to delete empty directories only.</p>
<p>To find and use the project, check out the Github link at the top of this article.</p>
                </div><!-- /.entry-content -->
                
                <div class="comments">
                <h2>Comments !</h2>
                        <div id="disqus_thread"></div>
                        <script type="text/javascript">
                           var disqus_identifier = "2012/11/tagging-files-and-folders-using-hashtags-and-symlinks.html";
                           (function() {
                                var dsq = document.createElement('script');
                                dsq.type = 'text/javascript'; dsq.async = true;
                                dsq.src = 'http://blog-boa-nu.disqus.com/embed.js';
                                (document.getElementsByTagName('head')[0] ||
                                 document.getElementsByTagName('body')[0]).appendChild(dsq);
                          })();
                        </script>
                </div>
                
        </article>
</section>

        </div>

        <div class="span3">
          


<div class="well sidebar-nav" id="sidebar-categories">
<ul class="nav nav-list">
<li class="nav-header"><h4><i class="icon-folder-close icon-large"></i>Categories</h4></li>

<li>
<a href="../.././category/geeky.html">
    <i class="icon-folder-open icon-large"></i>geeky
</a>
</li>

<li>
<a href="../.././category/misc.html">
    <i class="icon-folder-open icon-large"></i>misc
</a>
</li>

</ul></div>


<div class="well sidebar-nav" id="sidebar-tags">
<ul class="nav nav-list">
<li class="nav-header"><h4><i class="icon-tags icon-large"></i>Tags</h4></li>

    <span class="tag-1"><a href="../.././tag/linux.html">linux</a>&nbsp;&nbsp;</span>


    <span class="tag-4"><a href="../.././tag/pelican.html">pelican</a>&nbsp;&nbsp;</span>


    <span class="tag-4"><a href="../.././tag/github.html">github</a>&nbsp;&nbsp;</span>


    <span class="tag-4"><a href="../.././tag/blog.html">blog</a>&nbsp;&nbsp;</span>


    <span class="tag-1"><a href="../.././tag/python.html">python</a>&nbsp;&nbsp;</span>


    <span class="tag-4"><a href="../.././tag/android.html">android</a>&nbsp;&nbsp;</span>


    <span class="tag-4"><a href="../.././tag/git.html">git</a>&nbsp;&nbsp;</span>


    <span class="tag-4"><a href="../.././tag/ssh.html">ssh</a>&nbsp;&nbsp;</span>


    <span class="tag-2"><a href="../.././tag/selinux.html">selinux</a>&nbsp;&nbsp;</span>


    <span class="tag-4"><a href="../.././tag/network.html">network</a>&nbsp;&nbsp;</span>


</ul></div>


<div class="well sidebar-nav" id="sidebar-social">
<ul class="nav nav-list">
<li class="nav-header"><h4><i class="icon-home icon-large"></i> social</h4></li>

    <li><a href="https://github.com/xeor/"><i class="icon-github-sign icon-large"></i>github</a></li>

    <li><a href="http://no.linkedin.com/in/lsolberg"><i class="icon-linkedin-sign icon-large"></i>linkedin</a></li>

</ul></div>





<div class="well sidebar-nav" id="sidebar-articles">
<ul class="nav nav-list">

    <li class="nav-header"><h4><i class="icon-pushpin icon-large"></i> every articles</h4></li>


    <li><a href="../.././2013/03/android-setup-part-1-apps.html">Android setup part 1 - Apps</a></li>

    <li><a href="../.././2013/01/making-your-linux-prompt-as-usefull-as-possible.html">Making your Linux prompt as usefull as possible</a></li>

    <li><a href="../.././2012/11/tagging-files-and-folders-using-hashtags-and-symlinks.html">Tagging files and folders using hashtags and symlinks</a></li>

    <li><a href="../.././2012/11/two-factor-ssh-login-google-authenticator-and-selinux.html">Two factor ssh login, Google authenticator and SELinux</a></li>

    <li><a href="../.././2012/11/selinux-finding-info.html">SELinux - Finding info</a></li>

    <li><a href="../.././2012/10/python-threading-example-creating-pingerpy.html">Python threading example, creating Pinger.py</a></li>

    <li><a href="../.././2012/10/blog-technology.html">Blog technology</a></li>

    <li><a href="../.././2012/10/another-blog-is-born.html">Another blog is born</a></li>

</ul></div>





        </div>

      </div><!--/row-->

      <hr>

    </div><!--/.fluid-container-->


    
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
	var pageTracker = _gat._getTracker("UA-35739277-1");
pageTracker._trackPageview();
} catch(err) {}</script>

    
    

<script type="text/javascript">
    var disqus_shortname = 'blog-boa-nu';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>


    <!-- Le javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../.././theme/js/jquery-1.7.2.min.js"></script>
    <script src="../.././theme/js/bootstrap.min.js"></script>
  </body>
</html>